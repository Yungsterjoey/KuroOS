<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, minimum-scale=1, maximum-scale=5, user-scalable=yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="mobile-web-app-capable" content="yes">
  <title>KuroGlass Linux</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; touch-action: manipulation; }
    html, body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;
      background: #000;
      color: #fff;
      height: 100%;
      width: 100%;
      overflow: hidden;
      position: fixed;
      inset: 0;
    }
    
    .container {
      height: 100%;
      display: flex;
      flex-direction: column;
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
    }
    
    .header {
      padding: 8px 12px;
      background: rgba(20,20,25,0.95);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255,255,255,0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
      z-index: 100;
    }
    
    .logo {
      font-size: 14px;
      font-weight: 600;
      background: linear-gradient(135deg, #c9b8ff, #a78bfa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .header-btns {
      display: flex;
      gap: 8px;
    }
    
    .hdr-btn {
      padding: 6px 12px;
      background: rgba(255,255,255,0.1);
      border: none;
      border-radius: 8px;
      color: #fff;
      font-size: 12px;
      cursor: pointer;
    }
    
    .vnc-wrapper {
      flex: 1;
      position: relative;
      overflow: auto;
      -webkit-overflow-scrolling: touch;
      background: #111;
    }
    
    .vnc-frame {
      width: 1920px;
      height: 1080px;
      border: none;
      transform-origin: 0 0;
      display: block;
    }
    
    .toolbar {
      padding: 6px 8px;
      background: rgba(20,20,25,0.95);
      backdrop-filter: blur(20px);
      border-top: 1px solid rgba(255,255,255,0.1);
      display: flex;
      justify-content: space-around;
      gap: 4px;
      flex-shrink: 0;
      z-index: 100;
    }
    
    .tool-btn {
      padding: 8px 4px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 10px;
      color: #fff;
      font-size: 10px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
      flex: 1;
      max-width: 60px;
    }
    
    .tool-btn:active { background: rgba(255,255,255,0.15); }
    .tool-btn span { font-size: 16px; }
    
    .zoom-controls {
      position: fixed;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 8px;
      z-index: 200;
    }
    
    .zoom-btn {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: rgba(20,20,25,0.9);
      border: 1px solid rgba(255,255,255,0.2);
      color: #fff;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .zoom-btn:active { background: rgba(255,255,255,0.2); }
    
    .zoom-level {
      text-align: center;
      font-size: 10px;
      color: rgba(255,255,255,0.6);
    }
    
    .loading {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: #000;
      z-index: 1000;
    }
    
    .loading.hidden { display: none; }
    
    .spinner {
      width: 36px;
      height: 36px;
      border: 3px solid rgba(255,255,255,0.1);
      border-top-color: #a78bfa;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 12px;
    }
    
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="logo">üêß KuroGlass Linux</div>
      <div class="header-btns">
        <button class="hdr-btn" onclick="fitToScreen()">Fit</button>
        <button class="hdr-btn" onclick="location.href='/desktop-react'">Desktop</button>
      </div>
    </div>
    
    <div class="vnc-wrapper" id="wrapper">
      <iframe 
        id="vnc" 
        class="vnc-frame" 
        src="http://178.156.217.81:6080/vnc.html?autoconnect=true&password=kuro&resize=remote&quality=6&compression=2&view_only=false"
      ></iframe>
    </div>
    
    <div class="zoom-controls">
      <button class="zoom-btn" onclick="zoomIn()">+</button>
      <div class="zoom-level" id="zoom-level">100%</div>
      <button class="zoom-btn" onclick="zoomOut()">‚àí</button>
      <button class="zoom-btn" onclick="fitToScreen()">‚ä°</button>
    </div>
    
    <div class="toolbar">
      <button class="tool-btn" onclick="fitToScreen()"><span>üìê</span>Fit</button>
      <button class="tool-btn" onclick="zoomTo(100)"><span>1:1</span>100%</button>
      <button class="tool-btn" onclick="zoomTo(50)"><span>üîç</span>50%</button>
      <button class="tool-btn" onclick="toggleFS()"><span>‚õ∂</span>Full</button>
      <button class="tool-btn" onclick="refresh()"><span>üîÑ</span>Reload</button>
    </div>
    
    <div class="loading" id="loading">
      <div class="spinner"></div>
      <div style="color:rgba(255,255,255,0.6);font-size:14px;">Connecting...</div>
    </div>
  </div>
  
  <script>
    const vnc = document.getElementById('vnc');
    const wrapper = document.getElementById('wrapper');
    const loading = document.getElementById('loading');
    const zoomLabel = document.getElementById('zoom-level');
    
    let currentZoom = 100;
    
    vnc.onload = () => {
      setTimeout(() => {
        loading.classList.add('hidden');
        fitToScreen();
      }, 1000);
    };
    
    function setZoom(pct) {
      currentZoom = Math.max(25, Math.min(200, pct));
      const scale = currentZoom / 100;
      vnc.style.transform = `scale(${scale})`;
      vnc.style.width = `${1920}px`;
      vnc.style.height = `${1080}px`;
      wrapper.style.width = `${1920 * scale}px`;
      wrapper.style.height = `${1080 * scale}px`;
      zoomLabel.textContent = `${currentZoom}%`;
    }
    
    function zoomIn() { setZoom(currentZoom + 10); }
    function zoomOut() { setZoom(currentZoom - 10); }
    function zoomTo(pct) { setZoom(pct); }
    
    function fitToScreen() {
      const wrapperParent = wrapper.parentElement;
      const availW = wrapperParent.clientWidth;
      const availH = wrapperParent.clientHeight - 100;
      const scaleW = availW / 1920;
      const scaleH = availH / 1080;
      const scale = Math.min(scaleW, scaleH, 1);
      setZoom(Math.round(scale * 100));
      wrapper.scrollTo(0, 0);
    }
    
    function toggleFS() {
      if (document.fullscreenElement) {
        document.exitFullscreen();
      } else {
        document.documentElement.requestFullscreen().catch(()=>{});
      }
    }
    
    function refresh() {
      loading.classList.remove('hidden');
      vnc.src = vnc.src;
    }
    
    window.addEventListener('resize', fitToScreen);
  </script>
</body>
</html>
